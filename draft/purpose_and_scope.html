
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <meta name="lang:clipboard.copy" content="Copy to clipboard">
  <meta name="lang:clipboard.copied" content="Copied to clipboard">
  <meta name="lang:search.language" content="en">
  <meta name="lang:search.pipeline.stopwords" content="True">
  <meta name="lang:search.pipeline.trimmer" content="True">
  <meta name="lang:search.result.none" content="No matching documents">
  <meta name="lang:search.result.one" content="1 matching document">
  <meta name="lang:search.result.other" content="# matching documents">
  <meta name="lang:search.tokenizer" content="[\s\-]+">

  
    <link href="https://fonts.gstatic.com/" rel="preconnect" crossorigin>
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:400,500,700|Roboto:300,400,400i,700&display=fallback" rel="stylesheet">

    <style>
      body,
      input {
        font-family: "Roboto", "Helvetica Neue", Helvetica, Arial, sans-serif
      }

      code,
      kbd,
      pre {
        font-family: "Roboto Mono", "Courier New", Courier, monospace
      }
    </style>
  

  <link rel="stylesheet" href="_static/stylesheets/application.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-palette.css"/>
  <link rel="stylesheet" href="_static/stylesheets/application-fixes.css"/>
  
  <link rel="stylesheet" href="_static/fonts/material-icons.css"/>
  
  <meta name="theme-color" content="#2196f3">
  <script src="_static/javascripts/modernizr.js"></script>
  
  
    <link rel="apple-touch-icon" href="_static/images/apple-icon-152x152.png"/>
  
  
    <title>Purpose and scope &#8212; Python dataframe API standard 2023.04-DRAFT documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/material.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Use cases" href="use_cases.html" />
    <link rel="prev" title="Python dataframe API standard" href="index.html" />
  
    <link rel="apple-touch-icon" href="_static/images/apple-icon-152x152.png"/>
  
   

  </head>
  <body dir=ltr
        data-md-color-primary=indigo data-md-color-accent=green>
  
  <svg class="md-svg">
    <defs data-children-count="0">
      
      <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
      
    </defs>
  </svg>
  
  <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer">
  <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search">
  <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
  <a href="#purpose_and_scope" tabindex="1" class="md-skip"> Skip to content </a>
  <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex navheader">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="index.html" title="Python dataframe API standard 2023.04-DRAFT documentation"
           class="md-header-nav__button md-logo">
          
            <i class="md-icon">&#xe869</i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          <span class="md-header-nav__topic">Python dataframe API standard 2023.04-DRAFT</span>
          <span class="md-header-nav__topic"> Purpose and scope </span>
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
        
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" action="search.html" method="get" name="search">
      <input type="text" class="md-search__input" name="q" placeholder="Search"
             autocapitalize="off" autocomplete="off" spellcheck="false"
             data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>

      </div>
      
      
  
  <script src="_static/javascripts/version_dropdown.js"></script>
  <script>
    var json_loc = "../versions.json",
        target_loc = "../",
        text = "Versions";
    $( document ).ready( add_version_dropdown(json_loc, target_loc, text));
  </script>
  

    </div>
  </nav>
</header>

  
  <div class="md-container">
    
    
    
  <nav class="md-tabs" data-md-component="tabs">
    <div class="md-tabs__inner md-grid">
      <ul class="md-tabs__list">
            
            <li class="md-tabs__item"><a href="index.html" class="md-tabs__link">Dataframe API standard</a></li>
            
            <li class="md-tabs__item"><a href="https://data-apis.org" class="md-tabs__link">Consortium for Python Data API Standards</a></li>
      </ul>
    </div>
  </nav>
    <main class="md-main">
      <div class="md-main__inner md-grid" data-md-component="container">
        
          <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="index.html" title="Python dataframe API standard 2023.04-DRAFT documentation" class="md-nav__button md-logo">
      
        <i class="md-icon">&#xe869</i>
      
    </a>
    <a href="index.html"
       title="Python dataframe API standard 2023.04-DRAFT documentation">Python dataframe API standard 2023.04-DRAFT</a>
  </label>
  

  
  <ul class="md-nav__list">
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Context</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    <label class="md-nav__link md-nav__link--active" for="__toc"> Purpose and scope </label>
    
      <a href="#" class="md-nav__link md-nav__link--active">Purpose and scope</a>
      
        
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#purpose-and-scope--page-root" class="md-nav__link">Purpose and scope</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#introduction" class="md-nav__link">Introduction</a>
        </li>
        <li class="md-nav__item"><a href="#history-and-dataframe-implementations" class="md-nav__link">History and dataframe implementations</a>
        </li>
        <li class="md-nav__item"><a href="#scope" class="md-nav__link">Scope</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#goals" class="md-nav__link">Goals</a>
        </li>
        <li class="md-nav__item"><a href="#out-of-scope" class="md-nav__link">Out-of-scope</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#execution-details" class="md-nav__link">Execution details</a>
        </li>
        <li class="md-nav__item"><a href="#high-level-apis" class="md-nav__link">High level APIs</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#non-goals" class="md-nav__link">Non-goals</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#stakeholders" class="md-nav__link">Stakeholders</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#dataframe-library-authors" class="md-nav__link">Dataframe library authors</a>
        </li>
        <li class="md-nav__item"><a href="#downstream-library-authors" class="md-nav__link">Downstream library authors</a>
        </li>
        <li class="md-nav__item"><a href="#upstream-library-authors" class="md-nav__link">Upstream library authors</a>
        </li>
        <li class="md-nav__item"><a href="#dataframe-power-users" class="md-nav__link">Dataframe power users</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#high-level-api-overview" class="md-nav__link">High-level API overview</a>
        </li>
        <li class="md-nav__item"><a href="#how-to-read-this-document" class="md-nav__link">How to read this document</a>
        </li>
        <li class="md-nav__item"><a href="#how-to-adopt-this-api" class="md-nav__link">How to adopt this API</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#checking-a-dataframe-object-for-compliance" class="md-nav__link">Checking a dataframe object for Compliance</a>
        </li>
        <li class="md-nav__item"><a href="#discoverability-of-conforming-implementations" class="md-nav__link">Discoverability of conforming implementations</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#conformance" class="md-nav__link">Conformance</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
      <ul class="md-nav__list"> 
    <li class="md-nav__item">
    
    
      <a href="#introduction" class="md-nav__link">Introduction</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#history-and-dataframe-implementations" class="md-nav__link">History and dataframe implementations</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#scope" class="md-nav__link">Scope</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#stakeholders" class="md-nav__link">Stakeholders</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#high-level-api-overview" class="md-nav__link">High-level API overview</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#how-to-read-this-document" class="md-nav__link">How to read this document</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#how-to-adopt-this-api" class="md-nav__link">How to adopt this API</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="#conformance" class="md-nav__link">Conformance</a>
      
    
    </li></ul>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="use_cases.html" class="md-nav__link">Use cases</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="assumptions.html" class="md-nav__link">Assumptions</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">API</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="design_topics/index.html" class="md-nav__link">Design topics & constraints</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="future_API_evolution.html" class="md-nav__link">Future API standard evolution</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="API_specification/index.html" class="md-nav__link">API specification</a>
      
    
    </li>
    <li class="md-nav__item">
    
      <span class="md-nav__link caption"><span class="caption-text">Methodology and Tooling</span></span>
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="api_design_methodology.html" class="md-nav__link">Methodology for API design</a>
      
    
    </li>
    <li class="md-nav__item">
    
    
      <a href="verification_test_suite.html" class="md-nav__link">Verification - test suite</a>
      
    
    </li>
  </ul>
  

</nav>
              </div>
            </div>
          </div>
          <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
            <div class="md-sidebar__scrollwrap">
              <div class="md-sidebar__inner">
                
<nav class="md-nav md-nav--secondary">
    <label class="md-nav__title" for="__toc">Contents</label>
  <ul class="md-nav__list" data-md-scrollfix="">
        <li class="md-nav__item"><a href="#purpose-and-scope--page-root" class="md-nav__link">Purpose and scope</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#introduction" class="md-nav__link">Introduction</a>
        </li>
        <li class="md-nav__item"><a href="#history-and-dataframe-implementations" class="md-nav__link">History and dataframe implementations</a>
        </li>
        <li class="md-nav__item"><a href="#scope" class="md-nav__link">Scope</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#goals" class="md-nav__link">Goals</a>
        </li>
        <li class="md-nav__item"><a href="#out-of-scope" class="md-nav__link">Out-of-scope</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#execution-details" class="md-nav__link">Execution details</a>
        </li>
        <li class="md-nav__item"><a href="#high-level-apis" class="md-nav__link">High level APIs</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#non-goals" class="md-nav__link">Non-goals</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#stakeholders" class="md-nav__link">Stakeholders</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#dataframe-library-authors" class="md-nav__link">Dataframe library authors</a>
        </li>
        <li class="md-nav__item"><a href="#downstream-library-authors" class="md-nav__link">Downstream library authors</a>
        </li>
        <li class="md-nav__item"><a href="#upstream-library-authors" class="md-nav__link">Upstream library authors</a>
        </li>
        <li class="md-nav__item"><a href="#dataframe-power-users" class="md-nav__link">Dataframe power users</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#high-level-api-overview" class="md-nav__link">High-level API overview</a>
        </li>
        <li class="md-nav__item"><a href="#how-to-read-this-document" class="md-nav__link">How to read this document</a>
        </li>
        <li class="md-nav__item"><a href="#how-to-adopt-this-api" class="md-nav__link">How to adopt this API</a><nav class="md-nav">
              <ul class="md-nav__list">
        <li class="md-nav__item"><a href="#checking-a-dataframe-object-for-compliance" class="md-nav__link">Checking a dataframe object for Compliance</a>
        </li>
        <li class="md-nav__item"><a href="#discoverability-of-conforming-implementations" class="md-nav__link">Discoverability of conforming implementations</a>
        </li></ul>
            </nav>
        </li>
        <li class="md-nav__item"><a href="#conformance" class="md-nav__link">Conformance</a>
        </li></ul>
            </nav>
        </li>
  </ul>
</nav>
              </div>
            </div>
          </div>
        
        <div class="md-content">
          <article class="md-content__inner md-typeset" role="main">
            
  <section id="purpose-and-scope">
<h1 id="purpose-and-scope--page-root">Purpose and scope<a class="headerlink" href="#purpose-and-scope--page-root" title="Permalink to this heading">¶</a></h1>
<section id="introduction">
<h2 id="introduction">Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h2>
<p>This document defines a Python dataframe API.</p>
<p>A dataframe is a programming interface for expressing data manipulations over a
data structure consisting of rows and columns. Columns are named, and values in a
column share a common data type. This definition is intentionally left broad.</p>
</section>
<section id="history-and-dataframe-implementations">
<h2 id="history-and-dataframe-implementations">History and dataframe implementations<a class="headerlink" href="#history-and-dataframe-implementations" title="Permalink to this heading">¶</a></h2>
<p>Dataframe libraries in several programming language exist, such as
<a class="reference external" href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/data.frame">R</a>,
<a class="reference external" href="https://docs.databricks.com/spark/latest/dataframes-datasets/introduction-to-dataframes-scala.html">Scala</a>,
<a class="reference external" href="https://juliadata.github.io/DataFrames.jl/stable/">Julia</a> and others.</p>
<p>In Python, the most popular dataframe library is <a class="reference external" href="https://pandas.pydata.org/">pandas</a>.
pandas was initially developed at a hedge fund, with a focus on
<a class="reference external" href="https://en.wikipedia.org/wiki/Panel_data">panel data</a> and financial time series.
It was open sourced in 2009, and since then it has been growing in popularity, including
many other domains outside time series and financial data. While still rich in time series
functionality, today is considered a general-purpose dataframe library. The original
<code class="docutils literal notranslate"><span class="pre">Panel</span></code> class that gave name to the library was deprecated in 2017 and removed in 2019,
to focus on the main <code class="docutils literal notranslate"><span class="pre">DataFrame</span></code> class.</p>
<p>Internally, pandas is implemented on top of NumPy, which is used to store the data
and to perform many of the operations. Some parts of pandas are written in Cython.</p>
<p>As of 2020 the pandas website has around one million and a half visitors per month.</p>
<p>Other libraries emerged in the last years, to address some of the limitations of pandas.
But in most cases, the libraries implemented a public API very similar to pandas, to
make the transition to their libraries easier. Next, there is a short description of
the main dataframe libraries in Python.</p>
<p><a class="reference external" href="https://dask.org/">Dask</a> is a task scheduler built in Python, which implements a
dataframe interface. Dask dataframe uses pandas internally in the workers, and it provides
an API similar to pandas, adapted to its distributed and lazy nature.</p>
<p><a class="reference external" href="https://vaex.io/">Vaex</a> is an out-of-core alternative to pandas. Vaex uses hdf5 to
create memory maps that avoid loading data sets to memory. Some parts of Vaex are
implemented in C++.</p>
<p><a class="reference external" href="https://github.com/modin-project/modin">Modin</a> is a distributed dataframe
library originally built on <a class="reference external" href="https://github.com/ray-project/ray">Ray</a>, but has
a more modular way, that allows it to also use Dask as a scheduler, or replace the
pandas-like public API by a SQLite-like one.</p>
<p><a class="reference external" href="https://github.com/rapidsai/cudf">cuDF</a> is a GPU dataframe library built on top
of Apache Arrow and RAPIDS. It provides an API similar to pandas.</p>
<p><a class="reference external" href="https://spark.apache.org/docs/latest/api/python/index.html">PySpark</a> is a
dataframe library that uses Spark as a backend. PySpark public API is based on the
original Spark API, and not in pandas.</p>
<p><a class="reference external" href="https://github.com/databricks/koalas">Koalas</a> is a dataframe library built on
top of PySpark that provides a pandas-like API.</p>
<p><a class="reference external" href="https://ibis-project.org/">Ibis</a> is a dataframe library with multiple SQL backends.
It uses SQLAlchemy and a custom SQL compiler to translate its pandas-like API to
SQL statements, executed by the backends. It supports conventional DBMS, as well
as big data systems such as Apache Impala or BigQuery.</p>
<p><a class="reference external" href="https://www.pola.rs/">Polars</a> is a DataFrame library written in Rust, with
Python bindings available. Their API is intentionally different to the pandas one.</p>
<p>Given the growing Python dataframe ecosystem, and its complexity, this document provides
a standard Python dataframe API. Until recently, pandas has been a de-facto standard for
Python dataframes. But currently there are a growing number of not only dataframe libraries,
but also libraries that interact with dataframes (visualization, statistical or machine learning
libraries for example). Interactions among libraries are becoming complex, and the pandas
public API is suboptimal as a standard, for its size, complexity, and implementation details
it exposes (for example, using NumPy data types or <code class="docutils literal notranslate"><span class="pre">NaN</span></code>).</p>
</section>
<section id="scope">
<h2 id="scope">Scope<a class="headerlink" href="#scope" title="Permalink to this heading">¶</a></h2>
<p>In the first iteration of the API standard, the scope is limited to create a data exchange
protocol. In future iterations the scope will be broader, including elements to operate with
the data.</p>
<p>It is in the scope of this document the different elements of the API. This includes signatures
and semantics. To be more specific:</p>
<ul class="simple">
<li><p>Data structures and Python classes</p></li>
<li><p>Functions, methods, attributes and other API elements</p></li>
<li><p>Expected returns of the different operations</p></li>
<li><p>Data types (Python and low-level types)</p></li>
</ul>
<p>The scope of this document is limited to generic dataframes, and not dataframes specific to
certain domains.</p>
<section id="goals">
<h3 id="goals">Goals<a class="headerlink" href="#goals" title="Permalink to this heading">¶</a></h3>
<p>The goal of the first iteration is to provide a data exchange protocol, so consumers of dataframes
can interact with a standard interface to access their data.</p>
<p>The goal of future iterations will be to provide a standard interface that encapsulates
implementation details of dataframe libraries. This will allow users and third-party libraries to
write code that interacts and operates with a standard dataframe, and not with specific implementations.</p>
<p>The main goals for the API defined in this document are:</p>
<ul class="simple">
<li><p>Make conversion of data among different implementations easier</p></li>
<li><p>Let third party libraries consume dataframes from any implementations</p></li>
</ul>
<p>In the future, besides a data exchange protocol, the standard aims to include common operations
done with dataframe, with the next goals in mind:</p>
<ul class="simple">
<li><p>Provide a common API for dataframes so software using dataframes can work with all
implementations</p></li>
<li><p>Provide a common API for dataframes to build user interfaces on top of it, for example
libraries for interactive use or specific domains and industries</p></li>
<li><p>Help user transition from one dataframe library to another</p></li>
</ul>
<p>See the <a class="reference internal" href="use_cases.html"><span class="std std-doc">use cases</span></a> section for details on the exact use cases considered.</p>
</section>
<section id="out-of-scope">
<h3 id="out-of-scope">Out-of-scope<a class="headerlink" href="#out-of-scope" title="Permalink to this heading">¶</a></h3>
<section id="execution-details">
<h4 id="execution-details">Execution details<a class="headerlink" href="#execution-details" title="Permalink to this heading">¶</a></h4>
<p>Implementation details of the dataframes and execution of operations. This includes:</p>
<ul class="simple">
<li><p>How data is represented and stored (whether the data is in memory, disk, distributed)</p></li>
<li><p>Expectations on when the execution is happening (in an eager or lazy way)</p></li>
<li><p>Other execution details</p></li>
</ul>
<p><strong>Rationale:</strong> The API defined in this document needs to be used by libraries as diverse as Ibis,
Dask, Vaex or cuDF. The data can live in databases, distributed systems, disk or GPU memory.
Any decision that involves assumptions on where the data is stored, or where execution happens
could prevent implementation from adopting the standard.</p>
</section>
<section id="high-level-apis">
<h4 id="high-level-apis">High level APIs<a class="headerlink" href="#high-level-apis" title="Permalink to this heading">¶</a></h4>
<p>It is out of scope to provide an API designed for interactive use. While interactive use
is a key aspect of dataframes, an API designed for interactive use can be built on top
of the API defined in this document.</p>
<p>Domain or industry specific APIs are also out of scope, but can benefit from the standard
to better interact with the different dataframe implementation.</p>
<p><strong>Rationale:</strong> Interactive or domain specific users are key in the Python dataframe ecosystem.
But the amount and diversity of users makes it unfeasible to standardize every dataframe feature
that is currently used. In particular, functionality built as syntactic sugar for convenience in
interactive use, or heavily overloaded create very complex APIs. For example, the pandas dataframe
constructor, which accepts a huge number of formats, or its <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">df[something]</span></code>)
which is heavily overloaded. Implementations can provide convenient functionality like this one
for the users they are targeting, but it is out-of-scope for the standard, so the standard is
simple and easy to adopt.</p>
</section>
</section>
<section id="non-goals">
<h3 id="non-goals">Non-goals<a class="headerlink" href="#non-goals" title="Permalink to this heading">¶</a></h3>
<ul class="simple">
<li><p>Build an API that is appropriate to all users</p></li>
<li><p>Have a unique dataframe implementation for Python</p></li>
<li><p>Standardize functionalities specific to a domain or industry</p></li>
</ul>
</section>
</section>
<section id="stakeholders">
<h2 id="stakeholders">Stakeholders<a class="headerlink" href="#stakeholders" title="Permalink to this heading">¶</a></h2>
<p>This section provides the list of stakeholders considered for the definition of this API.</p>
<section id="dataframe-library-authors">
<h3 id="dataframe-library-authors">Dataframe library authors<a class="headerlink" href="#dataframe-library-authors" title="Permalink to this heading">¶</a></h3>
<p>We encourage dataframe libraries in Python to implement the API defined in this document
in their libraries.</p>
<p>The list of known Python dataframe libraries at the time of writing this document is next:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/rapidsai/cudf">cuDF</a></p></li>
<li><p><a class="reference external" href="https://dask.org/">Dask</a></p></li>
<li><p><a class="reference external" href="https://github.com/h2oai/datatable">datatable</a></p></li>
<li><p><a class="reference external" href="https://github.com/dexplo/dexplo/">dexplo</a></p></li>
<li><p><a class="reference external" href="https://github.com/elastic/eland">Eland</a></p></li>
<li><p><a class="reference external" href="https://github.com/weld-project/weld#grizzly">Grizzly</a></p></li>
<li><p><a class="reference external" href="https://ibis-project.org/">Ibis</a></p></li>
<li><p><a class="reference external" href="https://github.com/databricks/koalas">Koalas</a></p></li>
<li><p><a class="reference external" href="https://docs.pymars.org/en/latest/">Mars</a></p></li>
<li><p><a class="reference external" href="https://github.com/modin-project/modin">Modin</a></p></li>
<li><p><a class="reference external" href="https://pandas.pydata.org/">pandas</a></p></li>
<li><p><a class="reference external" href="https://www.pola.rs/">polars</a></p></li>
<li><p><a class="reference external" href="https://spark.apache.org/docs/latest/api/python/index.html">PySpark</a></p></li>
<li><p><a class="reference external" href="https://static-frame.readthedocs.io/en/latest/">StaticFrame</a></p></li>
<li><p><a class="reference external" href="https://github.com/apple/turicreate">Turi Create</a></p></li>
<li><p><a class="reference external" href="https://vaex.io/">Vaex</a></p></li>
</ul>
</section>
<section id="downstream-library-authors">
<h3 id="downstream-library-authors">Downstream library authors<a class="headerlink" href="#downstream-library-authors" title="Permalink to this heading">¶</a></h3>
<p>Authors of libraries that consume dataframes. They can use the API defined in this document
to know how the data contained in a dataframe can be consumed, and which operations are implemented.</p>
<p>A non-exhaustive list of downstream library categories is next:</p>
<ul class="simple">
<li><p>Plotting and visualization (e.g. Matplotlib, Bokeh, Altair, Plotly)</p></li>
<li><p>Statistical libraries (e.g. statsmodels)</p></li>
<li><p>Machine learning libraries (e.g. scikit-learn)</p></li>
</ul>
</section>
<section id="upstream-library-authors">
<h3 id="upstream-library-authors">Upstream library authors<a class="headerlink" href="#upstream-library-authors" title="Permalink to this heading">¶</a></h3>
<p>Authors of libraries that provide functionality used by dataframes.</p>
<p>A non-exhaustive list of upstream categories is next:</p>
<ul class="simple">
<li><p>Data formats, protocols and libraries for data analytics (e.g. Apache Arrow, NumPy)</p></li>
<li><p>Task schedulers (e.g. Dask, Ray, Mars)</p></li>
<li><p>Big data systems (e.g. Spark, Hive, Impala, Presto)</p></li>
<li><p>Libraries for database access (e.g. SQLAlchemy)</p></li>
</ul>
</section>
<section id="dataframe-power-users">
<h3 id="dataframe-power-users">Dataframe power users<a class="headerlink" href="#dataframe-power-users" title="Permalink to this heading">¶</a></h3>
<p>This group considers developers of reusable code that use dataframes. For example, developers of
applications that use dataframes. Or authors of libraries that provide specialized dataframe
APIs to be built on top of the standard API.</p>
<p>People using dataframes in an interactive way are considered out of scope. These users include data
analysts, data scientists and other users that are key for dataframes. But this type of user may need
shortcuts, or libraries that take decisions for them to save them time. For example automatic type
inference, or excessive use of very compact syntax like Python squared brackets / <code class="docutils literal notranslate"><span class="pre">__getitem__</span></code>.
Standardizing on such practices can be extremely difficult, and it is out of scope.</p>
<p>With the development of a standard API that targets developers writing reusable code we expected
to also serve data analysts and other interactive users. But in an indirect way, by providing a
standard API where other libraries can be built on top. Including libraries with the syntactic
sugar required for fast analysis of data.</p>
</section>
</section>
<section id="high-level-api-overview">
<h2 id="high-level-api-overview">High-level API overview<a class="headerlink" href="#high-level-api-overview" title="Permalink to this heading">¶</a></h2>
</section>
<section id="how-to-read-this-document">
<h2 id="how-to-read-this-document">How to read this document<a class="headerlink" href="#how-to-read-this-document" title="Permalink to this heading">¶</a></h2>
<p>The API specification itself can be found under <a class="reference internal" href="API_specification/index.html#api-specification"><span class="std std-ref">API specification</span></a>.</p>
<p>For guidance on how to read and understand the type annotations included in
this specification, consult the Python
<a class="reference external" href="https://docs.python.org/3/library/typing.html">documentation</a>.</p>
</section>
<section id="how-to-adopt-this-api">
<span id="id1"></span><h2 id="how-to-adopt-this-api">How to adopt this API<a class="headerlink" href="#how-to-adopt-this-api" title="Permalink to this heading">¶</a></h2>
<p>Most (all) existing dataframe libraries will find something in this API standard
that is incompatible with a current implementation, and that they cannot
change due to backwards compatibility concerns. Therefore we expect that each
of those libraries will want to offer a standard-compliant API in a <em>new
namespace</em>. The question then becomes: how does a user access this namespace?</p>
<p>The simplest method is: document the import to use to directly access the
namespace (e.g. <code class="docutils literal notranslate"><span class="pre">import</span> <span class="pre">package_name.dataframe_api</span></code>). This has two issues
though:</p>
<ol class="arabic simple">
<li><p>Dataframe-consuming libraries that want to support multiple dataframe
libraries then have to explicitly import each library.</p></li>
<li><p>It is difficult to <em>version</em> the dataframe API standard implementation (see
<a class="reference internal" href="future_API_evolution.html#api-versioning"><span class="std std-ref">Versioning</span></a>).</p></li>
</ol>
<p>To address both issues, a uniform way must be provided by a conforming
implementation to access the API namespace, namely a <a class="reference internal" href="API_specification/dataframe_object.html#dataframe_api.DataFrame.__dataframe_namespace__" title="dataframe_api.DataFrame.__dataframe_namespace__"><span class="xref myst py py-meth">method on the dataframe
object</span></a>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xp</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">__dataframe_namespace__</span><span class="p">()</span>
</pre></div>
</div>
<p>The method must take one keyword, <code class="docutils literal notranslate"><span class="pre">api_version=None</span></code>, to make it possible to
request a specific API version:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">xp</span> <span class="o">=</span> <span class="n">x</span><span class="o">.</span><span class="n">__dataframe_namespace__</span><span class="p">(</span><span class="n">api_version</span><span class="o">=</span><span class="s1">'2023.04'</span><span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">xp</span></code> namespace must contain all functionality specified in
<a class="reference internal" href="API_specification/index.html#api-specification"><span class="std std-ref">API specification</span></a>. The namespace may contain other functionality; however,
including additional functionality is not recommended as doing so may hinder
portability and inter-operation of dataframe libraries within user code.</p>
<section id="checking-a-dataframe-object-for-compliance">
<h3 id="checking-a-dataframe-object-for-compliance">Checking a dataframe object for Compliance<a class="headerlink" href="#checking-a-dataframe-object-for-compliance" title="Permalink to this heading">¶</a></h3>
<p>Dataframe-consuming libraries are likely to want a mechanism for determining
whether a provided dataframe is specification compliant. The recommended
approach to check for compliance is by checking whether a dataframe object has
an <code class="docutils literal notranslate"><span class="pre">__dataframe_namespace__</span></code> attribute, as this is the one distinguishing
feature of a dataframe-compliant object.</p>
<p>Checking for an <code class="docutils literal notranslate"><span class="pre">__dataframe_namespace__</span></code> attribute can be implemented as a
small utility function similar to the following.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">is_dataframe_api_obj</span><span class="p">(</span><span class="n">x</span><span class="p">):</span>
    <span class="k">return</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="s1">'__dataframe_namespace__'</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="discoverability-of-conforming-implementations">
<h3 id="discoverability-of-conforming-implementations">Discoverability of conforming implementations<a class="headerlink" href="#discoverability-of-conforming-implementations" title="Permalink to this heading">¶</a></h3>
<p>It may be useful to have a way to discover all packages in a Python
environment which provide a conforming dataframe API implementation, and the
namespace that that implementation resides in.
To assist dataframe-consuming libraries which need to create dataframes originating
from multiple conforming dataframe implementations, or developers who want to perform
for example cross-library testing, libraries may provide an
<a class="reference external" href="https://packaging.python.org/specifications/entry-points/">entry point</a> in order to make a dataframe API
namespace discoverable.</p>
<div class="admonition-optional-feature admonition">
<p class="admonition-title">Optional feature</p>
<p>Given that entry points typically require build system &amp; package installer
specific implementation, this standard chooses to recommend rather than
mandate providing an entry point.</p>
</div>
<p>The following code is an example for how one can discover installed
conforming libraries:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">importlib.metadata</span> <span class="kn">import</span> <span class="n">entry_points</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">eps</span> <span class="o">=</span> <span class="n">entry_points</span><span class="p">()[</span><span class="s1">'dataframe_api'</span><span class="p">]</span>
    <span class="n">ep</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">ep</span> <span class="k">for</span> <span class="n">ep</span> <span class="ow">in</span> <span class="n">eps</span> <span class="k">if</span> <span class="n">ep</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s1">'package_name'</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
    <span class="c1"># The dict interface for entry_points() is deprecated in py3.10,</span>
    <span class="c1"># supplanted by a new select interface.</span>
    <span class="n">ep</span> <span class="o">=</span> <span class="n">entry_points</span><span class="p">(</span><span class="n">group</span><span class="o">=</span><span class="s1">'dataframe_api'</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">'package_name'</span><span class="p">)</span>

<span class="n">xp</span> <span class="o">=</span> <span class="n">ep</span><span class="o">.</span><span class="n">load</span><span class="p">()</span>
</pre></div>
</div>
<p>An entry point must have the following properties:</p>
<ul class="simple">
<li><p><strong>group</strong>: equal to <code class="docutils literal notranslate"><span class="pre">dataframe_api</span></code>.</p></li>
<li><p><strong>name</strong>: equal to the package name.</p></li>
<li><p><strong>object reference</strong>: equal to the dataframe API namespace import path.</p></li>
</ul>
</section>
</section>
<hr class="docutils"/>
<section id="conformance">
<h2 id="conformance">Conformance<a class="headerlink" href="#conformance" title="Permalink to this heading">¶</a></h2>
<p>A conforming implementation of the dataframe API standard must provide and
support all the functions, arguments, data types, syntax, and semantics
described in this specification.</p>
<p>A conforming implementation of the dataframe API standard may provide
additional values, objects, properties, data types, and functions beyond those
described in this specification.</p>
<p>Libraries which aim to provide a conforming implementation but haven’t yet
completed such an implementation may, and are encouraged to, provide details on
the level of (non-)conformance. For details on how to do this, see
<a class="reference internal" href="verification_test_suite.html"><span class="std std-doc">Verification - measuring conformance</span></a>.</p>
<p>Libraries which implement the Standard in a separate namespace
are required to provide the following methods:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">__dataframe_standard__</span></code>: used for converting a non-compliant dataframe to a compliant one;</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__column_standard__</span></code>: used for converting a non-compliant column to a compliant one.</p></li>
</ul>
<p>For example, pandas would have <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame.__dataframe_standard__</span></code> and
<code class="docutils literal notranslate"><span class="pre">pandas.Series.__column_standard__</span></code>.</p>
<p>The signatures should be (note: docstring is optional):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">__dataframe_standard__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">api_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>

<span class="k">def</span> <span class="nf">__column_standard__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="o">/</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span> <span class="n">api_version</span><span class="p">:</span> <span class="nb">str</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">api_version</span></code> is
a string representing the version of the dataframe API specification
to be returned, in <code class="docutils literal notranslate"><span class="pre">'YYYY.MM'</span></code> form, for example, <code class="docutils literal notranslate"><span class="pre">'2023.04'</span></code>.
If it is <code class="docutils literal notranslate"><span class="pre">None</span></code>, it should return the namespace corresponding to
latest version of the dataframe API specification.  If the given
version is invalid or not implemented for the given module, an
error should be raised. Default: <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</section>
</section>


          </article>
        </div>
      </div>
    </main>
  </div>
  <footer class="md-footer">
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
          
            <a href="index.html" title="Python dataframe API standard"
               class="md-flex md-footer-nav__link md-footer-nav__link--prev"
               rel="prev">
              <div class="md-flex__cell md-flex__cell--shrink">
                <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
              </div>
              <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
                <span class="md-flex__ellipsis">
                  <span
                      class="md-footer-nav__direction"> Previous </span> Python dataframe API standard </span>
              </div>
            </a>
          
          
            <a href="use_cases.html" title="Use cases"
               class="md-flex md-footer-nav__link md-footer-nav__link--next"
               rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title"><span
                class="md-flex__ellipsis"> <span
                class="md-footer-nav__direction"> Next </span> Use cases </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink"><i
                class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          
        </a>
        
      </nav>
    </div>
    <div class="md-footer-meta md-typeset">
      <div class="md-footer-meta__inner md-grid">
        <div class="md-footer-copyright">
          <div class="md-footer-copyright__highlight">
              &#169; Copyright 2021-, Consortium for Python Data API Standards.
              
          </div>
            Created using
            <a href="http://www.sphinx-doc.org/">Sphinx</a> 6.2.1.
             and
            <a href="https://github.com/bashtage/sphinx-material/">Material for
              Sphinx</a>
        </div>
      </div>
    </div>
  </footer>
  <script src="_static/javascripts/application.js"></script>
  <script>app.initialize({version: "1.0.4", url: {base: ".."}})</script>
  </body>
</html>